
下面本软件所使用的库及其许可证说明：
1. os, sys, json, logging, re, functools, datetime, random, io, warnings：这些都是Python标准库，遵循PSF许可证，允许商用，无需额外费用。
2. Pyside6: PySide6是免费商用的，无需购买商业许可证。其许可证是LGPL（Lesser General Public License）版本3或更高版本‌‌12。但是，它所依赖的库可能有收费的。
3. pymysql：MIT许可证，允许商用，需保留版权声明。
4. PyCryptodome:免费商用的加密模块，不需要购买许可证‌。
5. pypinyin：Apache 2.0，允许商用，需保留版权和NOTICE文件。
6. PyCryptodome：免费商用，无需购买许可证‌。但如果在使用时涉及到其他需要许可证的软件或资源（如特定的字体、图像或第三方库），则可能需要遵守这些资源的许可证要求，并可能需要购买相应的许可证。
7. reportlab：BSD-style许可证，允许商用，但若修改代码需保留版权声明。

-------------------------本软件的特色：----------------------------
1，这款软件是专门为中医师设计的，并不涉及过多繁杂的功能，以便中医师不再为数据的保存分类以及查找而苦恼，可以不受干扰的潜心于中医广阔的天地中，以医入道。
2，本软件效仿广东惠州龙门沙迳人氏中医师陈焕林的“中医处方系统”的结构框架，乃因其结构设计确为精心精良打造，实难再有精简之处！
3，陈焕林在其免费软件界面状态栏中称其初衷是为中医学之发展尽一份心力，本人亦然。夕人曰：“寄蜉蝣于天地，渺浮海之一粟。哀吾生之须臾，羡长江之无穷。”
大道无形，运行日月。大道无情，生育天地。人于天地之间，何其渺小，天行健，君子以自强不息，吾等学人当遨游于广阔天地之中，无拘无束。
4，开发缘由：本人使用“中医处方系统”软件之时常报错，该软件在win7／win10系统上无法正常运行，或因其设计于2011年之时是主要支持windows xp系统，故特请人重新设计一款类似的软件。
因开发该软件之时，本人也只是初学Python编程，软件的开发工作主要功能是请人耗费心力编写的，本人仅参与软件的界面设计和一小部分功能编写。
后续将由本人继续开发和维护，因限于初学，故而软件的维护更新并不会频繁，软件运行时也可能会出现暂未发现的bug，而修正更新或不能及时，
故请见谅。用该软件的用户，也请自行斟酌这种情况。同时，该软件也将免费开源在github上，有缘之人可自取。
对bug的反馈以及功能优化上的要求，可在github或论坛上提交。本人会酌情处理。
5，该软件是使用python和pyside6编译的全新界面，并在此基础上增添了一些实用功能，
比如：用户登录密码随机加密(仅是为了防止别人进入软件系统误删数据)，增加了针灸病历记录部分，可以嵌入图片，自动计价，界面伸缩，版块可拖动隐藏。
6，软件界面的设计对功能作了优化布局，以便让用户尽量在一个界面上看到大部分需要看到的内容，不必再费时在软件中隐藏的菜单里找。
7，本软件的数据库zy.sql是个只有结构没有数据的空白数据库，以便用户导入自己的数据。医师陈焕林的数据库是mdb格式。如果想从医师陈焕林的“中医处方系统”将数据导入到Mysql中，
可另外下载chl.sql文件，这个文件已经将原mdb格式的文件数据导入到符合本软件使用的sql中了。其中的数据，仅作为演示之用。
实际用时，医师应根据情况而定，并自行承担责任。
8，随Mysql安装的workbench不是很好用，容易造成数据库卡顿崩溃。建议使用navicat导入数据库，安全稳定高效。

--------------------------项目启动更新日志：---------------------------------
2025-1-27,下载构建开发环境的软件，Mysql5.7，34，python-3.8.10-amd64，pycharm-community-2020.3.5，配置软件。
软件优势简介：
1，Mysql数据库能够存储的数据条目数量没有明确的限制，其具体容量主要依赖于服务器硬件配置、操作系统限制、以及MySQL本身的数据类型和存储引擎等因素。
除了支持本地，还支持联网的数据库访问读写。既可以满足数据访问量小的个人需求，也客户满足访问量较大的客户需求。
2，Python的语法简洁明了‌，这使得编写和阅读代码变得非常容易。跨平台支持‌是Python的另一个重要优点。Python可以在Windows、Linux和Mac OS等多种操作系统上运行，
这使得开发者可以在不同的平台上开发和部署应用程序，提高了程序的可移植性。
3，PyCharm社区版是免费的，适合个人开发者和小型团队使用，无需支付任何费用。

------------------------待办事项---------------------------------------
1，集成一个功能，实现用户自己数据的批量导入（excel表导入文字和图片，如果图片无法从excel中导入，应另外做一个导入图片的）
2，在前端显示默认图片的张数，并打开一个界面，浏览更多图片（应设限制）。图片可分类对应舌诊，面诊，手诊，脚等
3, 登录用户与医师的绑定（出报告显示医师不同）,诊金对应
4, 窗口初始化groupbox比例[30, 160, 100, 90]
5，将除了zhongyi,resources.qrc resources_re.py之外的文件移入ui文件夹，然后关联zhongyi和main_window_system.py
6, 当用户编号为1的被删除时，提示：未找到诊金设置。在数据库中将其修改为1后就可以了。这个要解决。
或许可以将main_window_system下的诊金获取方式改为从当前登录账户中获取。

-------------------------------------------------------------------
2025-1-27之后，设计软件界面主界面，逐步完成各模块的基本功能，特别是各模块之间的数据关联。各查询框实现拼音和/或汉字查询。
2025-2-8,
设计软件的登录界面，实现用户登录，注册，密码重设。
2025-2-9,
界面实现各分切加限定窗口大小相结合的方式显示。辩证选方集中在一个界面。实现单击药名对方剂进行加减。自动计算价格。
2025-2-10，
打印时文件自动保存。可导出pdf，打印依赖模块改为pypdfium2。测试mysql的远程访问，确保异地网络读取数据库。
2025-2-12,
用户登录时采用PyCryptodome加密方式对密码进行保存，放弃原来的json明码。读取数据库时，也是通过专用的加密文件连接数据库。
2025-2-13,
历史记录查询实现键盘上下键切换时，其他相关窗口表格内容自动显示。原来采用的点击显示保持不变。同样，处方以及选方与各自下面备注的关联也是这样处理的。
修正了登录界面line edit不能自定义背景色的问题。
2025-2-14,
修正患者基本资料中性别的性别选择后不能自动退出编辑的问题。添加患者照片。
2025-2-15,
解决Focusout错误
2025-2-16，
修改界面，将菜单按钮加到左侧，方便直接查看数据。
实现处方设置界面基本功能，还不能实现对数据的添加，保存和删除，需要和“方名”关联才可以，不然可能误操作。
药物添加的方式和剂量的判断还没有实现。键盘上下键的查看关联还没实现。
数据库中“辩证”里面的表头“证状”改为“说明”，请注意是否会有连锁反应，出现无法显示等问题。
添加病证设置，诊断设置，同时发现保存有问题，有的数据没存上，。还剩下诊断和针灸设置。
2025-2-17，
修正2-16日中病证设置，诊断设置里点击按钮无法保存的问题。
诊断和针灸设置界面完成。
修正当点击“初诊”按钮时，“tbl_DrugUsage”表格未清空的问题。
完成添加数据（药名和剂量）方式（选中后自动添加，自动判断重名，自己添加剂量的方式）。
性别处仍没完全解决，有时候还是会有错误提示
补全方剂和辨病中的数据库。
处方设置中的拼音必须填写，不然在前台不显示。
2025-2-18，
处方设置中药名的添加方式按“辩证选方”界面的复制粘贴方式完成了（自动识别重复以及跳转到剂量单元格）。
2025-2-19，
准备做个患者数据表，，不同的两行的多列内容可以进行比较后转置显示在左右两个窗口内，高亮显示区别。
检查需要自动生成拼音的文件，生成拼音时要检查原来的拼音是否存在，如果有且拼写正确则忽略，如果无或不正确则更新
拼音缩写完成的逻辑比较好的有：病证，辩证，诊断，针灸。处方处比较复杂，容易出错，暂时不改。中药处可能由于某些原因，拼音也暂时未改。
用法与煎法合并，并将首页用到煎法的地方重新关联修改。
首页菜单图标设置
2025-2-20，
完成针灸拼音，至此关于拼音缩写部分已修改完成。
基本信息中漏了身份证号码输入的地方。
设计患者信息对比页的界面。
2025-2-21，
患者信息对比页完成。至此，整个软件大致算是完成了。后期对局部进行修改或测试即可。
解决保存用户信息时提示debug的问题。
2025-2-22，
解决DrugFormulas_window.py导致的ValueError: embedded null character错误，
发现处方处对于原有的拼音确实没有擅自再去更改，而之前认为逻辑比较的好的"病证，辩证，诊断，针灸。"却会再次读写拼音，容易造成数据频繁读写。
2025-2-23，
拼音缩写修改：根据drugformala（处方），修改了病症（成功，可以记住多个同时保存），辩证，诊断，针灸，中药，用户。
修改按钮为渐变动画效果。
更换为MariaDB数据库。发现，数据库中的字符集和排序规则不统一，无法成功导入数据库，仅成功导入2个表，还有一个空的表格。
统一字符集和排序规则：utf8mb4和utf8mb4_unicode_ci
2025-2-24
解决软件的外部工具在用ui文件生成py时会误删别的文件的问题(外部工具中的参数设置修改为适合pyside6的，修改了ui转化的文件名)。
解决诊金没有加入合计里。UI界面上加入诊金，从用户信息里面调取，计算合计价格，并在打印报告里显示。
2025-2-25
添加身份证号码一列
将患者对比页的图片改为相对路径保存。以免图片过多时造成数据库崩溃。
将主页的患者照片改为相对路径保存。
当用户编号为1的被删除时，提示：未找到诊金设置。在数据库中将其修改为1后就可以了。这个要解决。暂时设置Admin为不可删除，并在提供的数据库中写入Admin。
其实，如果用户把admin改成别的名了，依然可以删掉。这个就没办法了，在"关于“中应说明。
或许可以将main_window_system下的诊金获取方式改为从当前登录账户中获取。

软件数据库要设一个默认Admin，否则进入主页后无法创建记录，提示错误。
设置Admin（不区分大小写）不可删除，以确保admin为“编号”1不可删除。首页重设密码允许为空。
修正患者头像保存错乱的问题：（切换行时，刚才上传给1的图片，在位上传图片的情况下点保存也会保存给2）（窗口在此初始化时，点保存会清空图片）。
2025-2-26
登录账户与诊金绑定，包括在总费用的计算和报告中显示对应数值。
修复带病证打印时不显示表头和页脚的问题。
修复首页注册要填诊金的问题。
2025-2-27
解决出现 KeyError: '姓名'的问题。
2025-2-28
优化PDF选用字体，检测系统已注册字体，选用第一个可用字体。
左侧菜单的弹出窗口大小根据主窗口大小适配比例
移除菜单栏和状态栏
修改左侧菜单中的字体间距
右键单击显示菜单汉化
2025-3-1
修改登录菜单动画效果
2025-3-2
优化显示比例
当无法加载患者照片时显示为空,不提示
2025-3-4
添加主治医生到患者常规资料行。
患者窗口采用通配符搜索
2025-3-10
修改“中药”设置中备注的显示方式，更符合查看习惯。
修正菜单汉化问题
2025-3-11
添加医案窗口，关键字高亮显示。
2025-3-12
优化“患者”设置页图片放大，始终居中显示图片。
"中药"设置页可为中药添加4张图片，且始终居中放大显示图片。
2025-3-13
医案中加入“处置方法”
修改备注、医案和针灸的图标
2025-3-14
为病症表现设定字数限制
修正pdf打印超边距的问题。
患者页增加点击或键盘切换浏览资料的功能，同时修正图片放大时因没有清空Qlabel缓存导致放大的图片不对应的问题。
修改主界面患者照片的命名规则
2025-3-18
患者页对比窗口中的内容根据列宽自动换行，行距自动调整。
用法设置页中的内容根据列宽自动换行，行距自动调整。
2025-4-23
在打印预览中加入“病历号”的显示。
在主页添加一个”查看病历“按钮，方便查看或保存历史“病历记录”。点击此按钮不会改变数据（包括日期，主治医生等）。
而使用其他两个打印按钮则会改变历史记录的日期和主治医生。
2025-4-24
将病历查询显示结果改为倒序排列，使得最新的记录显示在上面。
恢复“病历记录”中诊金的显示。
2025-4-25
将打印预览（包括查看病历）中最下面的备注（“以上药物剂量单位为克”——这个没用了，因为药物剂量后面已经加了g）改为：针灸等费用是指针灸或其他疗法的费用。
同时，将原来的针灸费用改为针灸等费用。
修正主页里中药治疗的煎法选择功能，移除了对不存在方法 handle_decoction_selection 的引用，替换为新的 update_decoction_cell 方法
2025-5-11
患者对比页增加“日期时间”的显示，同时按编号倒序排列。
按日期确定版本号，如版本5.25.0511指的是更新日期为25年5月11日更新的版本(前面的总版本号不变为5，后面依次为年月日)。

-------------------------------------------------------------------

写软件说明：

软件名称: 清虚内守中医处方
版本: 5.0.0beta
版权所有: Frank L
特别声明：本软件为免费软件，无任何功能限制。待通过beta测试后，将免费开源在github上。
-------------------------------------------------------------------------
许可协议
1. 用户权利
您可免费使用、修改和分发本软件，但须遵守以下条款。
2. 第三方组件声明
本软件包含以下第三方组件，其使用受原始许可证约束：
    PySide6 (LGPLv3)：允许商用，但需遵守 LGPLv3 的动态链接要求。用户有权获取修改后的 PySide6 源代码。
    pymysql (MIT)：需在软件文档或界面中保留版权声明："Copyright © [年份] PyMySQL contributors"。
    Source Han Sans CN 字体 (SIL OFL 1.1)：分发时必须包含字体文件及 SIL_Open_Font_License_1.1.txt。
    其他 MIT/BSD 组件：包含 pypinyin、pycryptodome 等。
3. 第三方软件和证书列表
(终端输入命令可以知道什么了什么软件包： pip freeze > requirements.txt)
库/软件名称---------------------许可证类型
    chardet==5.2.0 ----------- LGPL 2.1
    Nuitka==2.6.4 ----------- Apache License 2.0
    ordered-set==4.1.0 ----------- MIT License
    pillow==10.4.0 ----------- HPND License
    pycryptodome==3.21.0 ----------- BSD License
    PyMySQL==1.1.1 ----------- MIT License
    pypdfium2==4.30.1 ----------- Apache License 2.0
    pypinyin==0.53.0 ----------- MIT License
    PySide6==6.1.3 ----------- LGPL 3.0
    pywin32==308 ----------- PSF License
    reportlab==4.3.0 ----------- BSD License
    shiboken6==6.1.3 ----------- LGPL 3.0
    zstandard==0.23.0 ----------- BSD License
以上所有软件包均允许免费商用